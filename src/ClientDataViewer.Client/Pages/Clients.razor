@page "/"
@page "/clients"
@using ClientDataViewer.Shared.Models
@using Microsoft.AspNetCore.Authorization

@attribute [Authorize]

<PageTitle>My Clients</PageTitle>
<AuthorizeView>
    <MudText Class="mb-4">Hello @context.User.Identity?.Name!</MudText>
    <MudGrid>
        @if (!_clients.Any())
        {
            <MudItem>
                <MudText Typo="Typo.body1" Color="Color.Error">There are no clients assigned to you, please contact your manager.</MudText>
            </MudItem>
        }
        @foreach (var client in _clients)
        {
            <MudItem sm="6" lg="3" xxl="2">
                <MudCard>
                    <MudCardHeader>
                        <CardHeaderAvatar>
                            <MudAvatar Color="Color.Primary">@client.Initial</MudAvatar>
                        </CardHeaderAvatar>
                        <CardHeaderContent>
                            <MudText Typo="Typo.h6">
                                @client.FullName
                                @switch (client.Gender)
                                {
                                    case Gender.Male:
                                        <MudIcon Size="Size.Medium" Icon="@Icons.Material.Filled.Male"></MudIcon>
                                        break;
                                    case Gender.Female:
                                        <MudIcon Size="Size.Medium" Icon="@Icons.Material.Filled.Female"></MudIcon>
                                        break;
                                    case Gender.Other:
                                    default:
                                        <MudIcon Size="Size.Medium" Icon="@Icons.Material.Filled.Transgender"></MudIcon>
                                        break;
                                }
                            </MudText>
                        </CardHeaderContent>
                        <CardHeaderActions>

                        </CardHeaderActions>
                    </MudCardHeader>
                    <MudCardContent>
                        <MudText Typo="Typo.body1">
                            <MudIcon Icon="@Icons.Material.Filled.Cake"></MudIcon> @client.BirthDateFormatted
                        </MudText>
                    </MudCardContent>
                    <MudCardActions>
                        <MudButton Href="@($"/clients/{client.NativeId}")" StartIcon="@Icons.Material.Filled.Person" Color="Color.Default">Details</MudButton>
                    </MudCardActions>
                </MudCard>
            </MudItem>
        }
    </MudGrid>
</AuthorizeView>